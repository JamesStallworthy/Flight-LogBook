<html>
    <Head>
        <title>Log Book</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    </Head>
    <body>
        <div class="container">
            <h1>Log Book</h1>

            <table class = "table table-bordered">
                <thead></thead>
                <tbody></tbody>
            </div>
        </table>

        <script>
            const electron = require('electron');
            const {ipcRenderer} = electron;

            const thead = document.querySelector('thead');
            const tbody = document.querySelector('tbody');


            ipcRenderer.on('init:headers', function(e,headerData){
                console.log("Creating headers");
                let tr = document.createElement('tr');
                headerData.forEach(function(item){
                    let th = document.createElement('th');
                    th.scope = "col";

                    let itemText = document.createTextNode(item.title);
                    console.log(item);
                    th.appendChild(itemText);
                    tr.appendChild(th);
                });

                thead.appendChild(tr);
            });

            ipcRenderer.on('flight:add', function(e, flight){
                console.log("Adding the following flight to the ui:" + flight);

                let tr = document.createElement('tr');

                Object.keys(flight).forEach(function(key) {
                    let th = document.createElement('th');
                    let itemText = document.createTextNode(flight[key]);

                    th.appendChild(itemText);
                    tr.appendChild(th);
                });

                tbody.appendChild(tr);
            });

        </script>
    </body>
</html>